# Fixed-Point

## float vs fixed-point
```cpp
// 우리가 원하는 값: 1.5

// ❌ float로 저장하면?
float f = 1.5;
// 부정확, 느림, 복잡함

// ✅ Fixed-Point로 저장하면?
int value = 384;  // 1.5 × 256 = 384
// 정수로 저장! (빠르고, 정확하고, 간단함)
```

384(표현)와 1.5(원하는 값)사이 변환?
```cpp
// 저장할 때: 실제 값에 256을 곱해서 저장
value = 1.5 × 256 = 384

// 꺼낼 때: 256으로 나눠서 원래 값 복원
실제 값 = 384 / 256 = 1.5
```

### 정수로 사용하기 위해
컴퓨터 내부에서 실제로 일어나는 일:
```cpp
Fixed a(1.5f);  
// ① 생성자에서: value = (int)(1.5 × 256) = 384
// ② 메모리에: 384 (정수) 저장

float result = a.toFloat();
// ③ 꺼낼 때: (float)384 / 256 = 1.5
```

**메모리에는 항상 정수만 저장!**  
소수는 "비율(ratio)"로 인코딩되어 있음!


### 비트 구조 (32-bit integer)
```
32-bit integer를 논리적으로 분할:

[  24 bits: 정수부  ][  8 bits: 소수부  ]
 ↑ 2^7 ... 2^1 2^0    2^-1 ... 2^-7 2^-8 ↑
```

### 8-bit 소수부의 의미
```
8 bits = 2^8 = 256가지 표현
→ 1/256 = 0.00390625 단위로 표현 가능
```

## steps

### step1: encoding

```cpp
Fixed a(1.5f);

// 생성자 내부:
_value = roundf(1.5f * 256);  // 384
```

**내부 상태:**
```
메모리:   [0x00000180] = 384 (정수)
의미:     1.5 (소수)
```

### step2: status
```cpp
// 메모리를 16진수로 보면:
_value = 384 = 0x00000180

// 2진수로 보면:
0000 0000 0000 0000 0000 0001 1000 0000
[      정수부: 1     ][  소수부: 128  ]
```
중요: 컴퓨터는 이게 1.5인지 모름! 그냥 384라는 정수!

### step3: decoding
```cpp
float f = a.toFloat();

// toFloat() 내부:
return (float)384 / 256;  // 1.5
```


## example
예시: 3.75 저장하고 꺼내기

```cpp
// ① 저장
Fixed a(3.75f);
// 내부: _value = 3.75 × 256 = 960

// 메모리:
_value = 960 (정수로 저장됨!)

// ② 꺼내기
float f = a.toFloat();
// 계산: 960 / 256 = 3.75
```